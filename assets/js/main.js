!function(t){function e(e){for(var n,i,o=e[0],c=e[1],u=e[2],p=0,d=[];p<o.length;p++)i=o[p],r[i]&&d.push(r[i][0]),r[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);for(l&&l(e);d.length;)d.shift()();return s.push.apply(s,u||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,o=1;o<a.length;o++){var c=a[o];0!==r[c]&&(n=!1)}n&&(s.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},r={0:0},s=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window.webpackJsonp=window.webpackJsonp||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;s.push([47,1]),a()}({47:function(t,e,a){t.exports=a(58)},58:function(t,e,a){"use strict";a.r(e);var n=a(45),r=a(0),s=a.n(r),i=a(36),o=a(44),c=a(13),u=a(4),l=a(5),p=a(7),d=a(6),m=a(14),h=a(8),b=function(t){function e(){return Object(u.a)(this,e),Object(p.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){if(null===this.props.meta.value||"undefined"===typeof this.props.meta.value)return!1;var t="";return"undefined"!==typeof this.props.meta.className&&this.props.meta.className.length>0&&(t=this.props.meta.className),"URL"===this.props.meta.type&&(this.props.meta.value=s.a.createElement("a",{href:this.props.meta.value,className:"button"},"View")),s.a.createElement("li",{className:t},this.props.meta.type,": ",this.props.meta.value)}}]),e}(s.a.Component),f=a(18),y=function(t){function e(){return Object(u.a)(this,e),Object(p.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t,e="card "+this.props.type.replace(/s/,"");return s.a.createElement("div",{className:e},this.props.resource.title&&s.a.createElement("h3",{className:"title"},"resources"===(t=this.props).type||"primoFavorites"===t.type?s.a.createElement("a",{href:t.externalUrl},t.resource.title):s.a.createElement(f.b,{to:t.prefixUrl+t.resource.slug,onClick:function(e){return t.handleClick(t.resource.slug,t.type)}},t.resource.title)),"resources"===this.props.type||"primoFavorites"===this.props.type?s.a.createElement("div",null):this.props.meta&&s.a.createElement("ul",{className:"meta"},this.props.meta.map(function(t,e){return s.a.createElement(b,{key:e,meta:t})})),this.props.description&&s.a.createElement("p",{className:"description"},this.props.description))}}]),e}(s.a.Component),v=function(t){function e(){return Object(u.a)(this,e),Object(p.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){function t(t){var e=t.substr(0,4),a=t.substr(4,2),n=t.substr(6,2);return(t=new Date(e,a,n)).toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric"})}var e=[{type:"Start Date",value:t(this.props.resource.courseData.startDate)},{type:"End Date",value:t(this.props.resource.courseData.endDate)}];return s.a.createElement(y,Object.assign({meta:e,prefixUrl:"/courses/"},this.props))}}]),e}(y),g=function(t){function e(){return Object(u.a)(this,e),Object(p.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=("resources"===this.props.type?"/courses/"+this.props.courseSlug:"")+("primoFavorites"===this.props.type?"/primo-favorites/":"/resources/");return s.a.createElement(y,{resource:this.props.resource,externalUrl:this.props.resource.resourceData.url,handleClick:this.props.handleClick,type:this.props.type,prefixUrl:t})}}]),e}(y),O=function(t){function e(){return Object(u.a)(this,e),Object(p.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return s.a.createElement(y,{resource:this.props.resource,handleClick:this.props.handleClick,type:this.props.type,prefixUrl:"/librarians/"})}}]),e}(y),j=function(t){function e(){return Object(u.a)(this,e),Object(p.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"formatDate",value:function(t){return(t=new Date(t)).toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric"})}},{key:"render",value:function(){var t=[{type:"Due Date",value:this.formatDate(this.props.resource.due_date),className:"important"}];return s.a.createElement(y,{resource:this.props.resource,meta:t,prefixUrl:"/circulation-data/",handleClick:this.props.handleClick,type:this.props.type})}}]),e}(y),E=function(t){function e(){return Object(u.a)(this,e),Object(p.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=[{type:"Due Date",value:this.props.resource.due_back_date}];return s.a.createElement(y,{resource:this.props.resource,meta:t,prefixUrl:"/circulation-data/",handleClick:this.props.handleClick,type:this.props.type})}}]),e}(y),D=function(t){function e(){return Object(u.a)(this,e),Object(p.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=[{type:"Amount",value:this.props.resource.original_amount}];return s.a.createElement(y,{resource:this.props.resource,meta:t,prefixUrl:"/circulation-data/",handleClick:this.props.handleClick,type:this.props.type})}}]),e}(y),k=function(t){function e(t){var a,n;if(Object(u.a)(this,e),(a=Object(p.a)(this,Object(d.a)(e).call(this,t))).formatDate=a.formatDate.bind(Object(m.a)(a)),"undefined"===typeof a.props.date)n=!1;else{var r=new Date(Number(a.props.date+"000"));n=a.formatDate(r)}return a.state={date:n},a}return Object(h.a)(e,t),Object(l.a)(e,[{key:"formatDate",value:function(t){return(t=new Date(t)).toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric"})}},{key:"render",value:function(){return!!this.state.date&&s.a.createElement("p",{className:"meta"},"Last updated ",this.state.date)}}]),e}(s.a.Component),C=function(t){function e(){return Object(u.a)(this,e),Object(p.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this;return!("number"===typeof this.props.numToShow&&this.props.numberOfResources<this.props.numToShow)&&s.a.createElement("div",null,"all"===this.props.numToShow&&s.a.createElement("button",{onClick:function(e){return t.props.handleButtonClick(6)}},"Collapse"),this.props.numToShow<=6&&s.a.createElement("button",{onClick:function(e){return t.props.handleButtonClick("all")}},"Expand"))}}]),e}(s.a.Component),w=function(t){function e(t){var a;return Object(u.a)(this,e),(a=Object(p.a)(this,Object(d.a)(e).call(this,t))).state={userData:null===a.props.userData?null:a.props.userData[a.props.type],dataType:a.props.type,cacheDate:null===a.props.userData?null:a.props.userData[a.props.type+"CacheUpdated"],numToShow:6},a.handleButtonClick=a.handleButtonClick.bind(Object(m.a)(a)),a}return Object(h.a)(e,t),Object(l.a)(e,[{key:"handleButtonClick",value:function(t){this.setState({numToShow:t})}},{key:"render",value:function(){var t,e;if("undefined"!==typeof this.props.headerContent&&(t=this.props.headerContent),"undefined"!==typeof this.props.footerContent&&(e=this.props.footerContent),void 0===this.state.userData||null===this.state.userData||0===this.state.userData.length)return s.a.createElement("div",null,s.a.createElement("h3",null,this.props.header),s.a.createElement("p",null,"You have no ",this.props.header.toLowerCase()," to display. Please ",s.a.createElement(f.a,{to:"/support/"},"contact support")," if you think  you should have some."),t,e);var a=this.state.userData;"number"===typeof this.state.numToShow&&(a=this.state.userData.slice(0,this.state.numToShow));for(var n=[],r=0;r<a.length;r++){var i=null,o={key:a[r].id,resource:a[r],handleClick:this.props.handleClick,type:this.props.type};switch(this.state.dataType){case"courses":i=s.a.createElement(v,o);break;case"resources":case"primoFavorites":i=s.a.createElement(g,o);break;case"librarians":i=s.a.createElement(O,o);break;case"loans":i=s.a.createElement(j,o);break;case"requests":i=s.a.createElement(E,o);break;case"fees":i=s.a.createElement(D,o);break;default:i=s.a.createElement(y,o)}n.push(i)}return s.a.createElement("div",null,s.a.createElement("h2",null,this.props.header),s.a.createElement(k,{date:this.state.cacheDate}),t,s.a.createElement("div",{className:"card-container"},n),s.a.createElement(C,{numberOfResources:this.state.userData.length,numToShow:this.state.numToShow,handleButtonClick:this.handleButtonClick}),e)}}]),e}(s.a.Component),S=function(t){function e(){return Object(u.a)(this,e),Object(p.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("p",null,"Sorry, we can\u2019t load data for your user account. Either you don\u2019t have an account or something else went wrong."),s.a.createElement("p",null,"Error data:"),s.a.createElement("pre",null,s.a.createElement("code",null,this.props.message)))}}]),e}(s.a.Component),N=function(t){function e(){return Object(u.a)(this,e),Object(p.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return"stolaf.edu"===this.props.institution?(window.__lc=window.__lc||{},window.__lc.license=7639251,function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://cdn.livechatinc.com/tracking.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}(),null):"carleton.edu"===this.props.institution?(function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://www.questionpoint.org/crs/qwidgetV4/js/qwidget.bootstrapnj.js?langcode=1&instid=13819&skin=gray&size=fill&customSkin=https%3A%2F%2Fwww.carleton.edu%2Fdepartments%2FLIBR%2FQuestionPoint%2Fcss%2Fcustom.css%0A",t.id="questionpoint.bootstrap1",t.qwidgetno="1";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e),t.onload=function(){"undefined"!==typeof QwidgetBootStrap&&QwidgetBootStrap.embed()}}(),s.a.createElement("div",null,s.a.createElement("h2",null,"Carleton Support"),s.a.createElement("div",{style:{height:"350px"}},s.a.createElement("div",{id:"questionpoint.chatwidget1",qwidgetno:"1"})),s.a.createElement("p",null,"When Carleton librarians are not available, librarians from other institutions will be available to help you 24/7."))):null}}]),e}(s.a.Component),U=function(t){function e(){return Object(u.a)(this,e),Object(p.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return this.props.error?s.a.createElement(S,{message:this.props.errorMessage}):s.a.createElement("div",{className:"entry-content clear"},s.a.createElement(N,{institution:this.props.parentState.userData.bridgeLibraryInstitution}),s.a.createElement(w,{userData:this.props.parentState.userData,type:"courses",header:"Courses",handleClick:this.props.handleClick}),s.a.createElement(w,{userData:this.props.parentState.userData,type:"librarians",header:"Librarians",handleClick:this.props.handleClick}),s.a.createElement(w,{userData:this.props.parentState.userData,type:"primoFavorites",header:"Primo Favorites",handleClick:this.props.handleClick}))}}]),e}(s.a.Component),I=function(t){function e(){return Object(u.a)(this,e),Object(p.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this;function e(t){var e=t.substr(0,4),a=t.substr(4,2),n=t.substr(6,2);return(t=new Date(e,a,n)).toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric"})}function a(t,e,a){t.forEach(function(t){if(t.resourceData.resourceType.length>0){var n="";t.resourceData.resourceType.forEach(function(a){n=a.name,null!==a.ancestors&&a.ancestors.forEach(function(t){n=t.name+": "+n}),"undefined"===typeof e[n]?e[n]=[t]:e[n].push(t)})}else 0===t.resourceData.resourceType.length&&a.push(t)})}var n=!1,r={},i={},o=[],c=[],u=this.props.parentState.currentObject,l=this.props.parentState.currentObject.courseData,p=[],d=[],m=[],h=[];function f(t,e){var a=[];for(var n in t)a.push(s.a.createElement("div",{key:n+"wrapper"},s.a.createElement("h3",null,n),s.a.createElement("div",{className:"card-container"},t[n].map(function(t){return s.a.createElement(g,{key:t.id,courseSlug:u.slug,resource:t,handleClick:e,type:"resources"})}))));return a}return"undefined"!==typeof l&&null!==l&&(h=[{type:"Start Date",value:e(l.startDate)},{type:"End Date",value:e(l.endDate)},{type:"Academic Department",value:l.academicDepartment[0].name},{type:"Course Number",value:l.courseNumber},{type:"Description",value:l.description}],null!==l.relatedCoursesResources&&l.relatedCoursesResources.length>0?(n=!0,a(l.relatedCoursesResources,r,c),p=c.map(function(e){return s.a.createElement(g,{key:e.id,courseSlug:u.slug,resource:e,handleClick:t.props.handleClick,type:"resources"})})):(n=!1,p=[]),null!==l.coreResources&&l.coreResources.length>0?(a(l.coreResources,i,o),d=o.map(function(e){return s.a.createElement(g,{key:e.id,courseSlug:u.slug,resource:e,handleClick:t.props.handleClick,type:"resources"})})):d=[],this.props.parentState.userData.librarians&&this.props.parentState.userData.librarians.length>0&&(m=this.props.parentState.userData.librarians.map(function(e){return"undefined"!==typeof e.librarianData.academicDepartment.find(function(t){return t.name===l.academicDepartment[0].name})?s.a.createElement(O,{key:e.id,resource:e,handleClick:t.props.handleClick,type:"librarians"}):[]}).filter(function(t){return t.length>0||Object.keys(t).length>0}))),0===m.length&&(m=[]),s.a.createElement("div",{className:"entry-content clear"},s.a.createElement("ul",null,h.length>0&&h.map(function(t,e){return s.a.createElement(b,{key:e,meta:t})})),m.length>0?s.a.createElement("h2",null,"Librarians"):s.a.createElement("div",null),s.a.createElement("div",{className:"card-container"},m),d.length>0?s.a.createElement("h2",null,"Core Resources"):s.a.createElement("div",null),f(i,this.props.handleClick),s.a.createElement("div",{className:"card-container"},d),p.length>0?s.a.createElement("h2",null,"Resources"):s.a.createElement("div",null),f(r,this.props.handleClick),n?s.a.createElement("div",null,p.lengh>0?s.a.createElement("h3",null,"Other Resources"):s.a.createElement("div",null),s.a.createElement("div",{className:"card-container"},p)):s.a.createElement("div",{className:"card-container"},p))}}]),e}(s.a.Component),T=function(t){function e(){return Object(u.a)(this,e),Object(p.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this.props.parentState.currentObject.resourceData,e=[];return"undefined"!==typeof t&&null!==t&&(e=[{type:"URL",value:t.url},{type:"Author",value:t.author},{type:"ISBN",value:t.isbn},{type:"Publication Year",value:t.publicationYear},{type:"Description",value:t.description}]),s.a.createElement("div",{className:"entry-content clear"},s.a.createElement("ul",null,e.length>0&&e.map(function(t,e){return s.a.createElement(b,{key:e,meta:t})})))}}]),e}(s.a.Component),R=function(t){function e(){return Object(u.a)(this,e),Object(p.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this.props.parentState.currentObject.librarianData,e=[];return"undefined"!==typeof t&&null!==t&&(e=[{type:"Academic Departments",value:t.academicDepartment.reduce(function(t,e){return"object"===typeof t&&(t=t.name),t+", "+e.name})}],null!==t.librarianUserId&&"undefined"!==typeof t.librarianUserId.userData&&null!==t.librarianUserId.userData&&e.push({type:"Email Address",value:t.librarianUserId.userData.librarian.emailAddress},{type:"Phone Number",value:t.librarianUserId.userData.librarian.phoneNumber},{type:"Office Location",value:t.librarianUserId.userData.librarian.officeLocation},{type:"Website",value:t.librarianUserId.userData.librarian.website},{type:"Photo",value:t.librarianUserId.userData.librarian.picture})),s.a.createElement("div",{className:"entry-content clear"},s.a.createElement("ul",null,e.length>0&&e.map(function(t,e){return s.a.createElement(b,{key:e,meta:t})})))}}]),e}(s.a.Component),_=function(t){function e(){return Object(u.a)(this,e),Object(p.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=s.a.createElement("p",null,s.a.createElement("a",{className:"button carleton",href:"https://apps.carleton.edu/campus/library/ill/"},"Interlibrary Loan"),s.a.createElement("a",{className:"button stolaf",href:"https://ezproxy.stolaf.edu/loginurl=https://stolaf.illiad.oclc.org/illiad/illiad.dll"},"Interlibrary Loan"));return s.a.createElement("div",{className:"entry-content clear"},s.a.createElement("p",null,"For renewals, request cancellations, and more options, please visit your account page in Catalyst: ",s.a.createElement("a",{className:"button carleton",href:"https://bridge.primo.exlibrisgroup.com/discovery/login?vid=01BRC_INST:CCO&lang=en"},"My Account"),s.a.createElement("a",{className:"button stolaf",href:"https://bridge.primo.exlibrisgroup.com/discovery/login?vid=01BRC_INST:SOC&lang=en"},"My Account")),s.a.createElement(w,{userData:this.props.parentState.userData.circulationData,type:"loans",header:"Loans",handleClick:this.props.handleClick}),s.a.createElement(w,{userData:this.props.parentState.userData.circulationData,type:"requests",header:"Requests",handleClick:this.props.handleClick,headerContent:t}),s.a.createElement(w,{userData:this.props.parentState.userData.circulationData,type:"fees",header:"Fines & Fees",handleClick:this.props.handleClick}))}}]),e}(s.a.Component),F=function(t){function e(){return Object(u.a)(this,e),Object(p.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"formatDate",value:function(t){return(t=new Date(t)).toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric"})}},{key:"render",value:function(){var t=this,e=this.props.parentState.userData.circulationData.loans.find(function(e){return e.id===t.props.parentState.currentObject.id}),a=[{type:"Due Date",value:this.formatDate(e.due_date),className:"important"},{type:"Author",value:e.author},{type:"Status",value:e.loan_status},{type:"Loan Date",value:this.formatDate(e.loan_date)},{type:"Circulation Desk",value:e.circ_desk.desc},{type:"Library",value:e.library.desc},{type:"Description",value:e.description},{type:"URL",value:"https://bridge.primo.exlibrisgroup.com/discovery/fulldisplay?docid=alma"+e.mms_id+"&vid=01BRC_INST:CCO"}];return s.a.createElement("div",{className:"entry-content clear"},s.a.createElement("ul",null,a.length>0&&a.map(function(t,e){return s.a.createElement(b,{key:e,meta:t})})))}}]),e}(s.a.Component),x=function(t){function e(){return Object(u.a)(this,e),Object(p.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this,e=this.props.parentState.userData.circulationData.requests.find(function(e){return e.id=t.props.parentState.currentObject.id}),a=[{type:"Due Date",value:e.due_back_date},{type:"Request Type",value:e.request_type},{type:"Pickup Location Library",value:e.pickup_location_library.desc},{type:"Pickup Location Circulation Desk",value:e.pickup_location_library.desc},{type:"Booking Start Date",value:e.booking_start_date},{type:"Booking Start Date",value:e.booking_start_date},{type:"Booking End Date",value:e.booking_end_date},{type:"Description",value:e.description}];return s.a.createElement("div",{className:"entry-content clear"},s.a.createElement("ul",null,a.length>0&&a.map(function(t,e){return s.a.createElement(b,{key:e,meta:t})})))}}]),e}(s.a.Component),L=function(t){function e(){return Object(u.a)(this,e),Object(p.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this,e=this.props.parentState.userData.circulationData.fees.find(function(e){return e.id=t.props.parentState.currentObject.id}),a=[{type:"Fee Type",value:e.type.value},{type:"Amount",value:e.original_amount}];return s.a.createElement("div",{className:"entry-content clear"},s.a.createElement("ul",null,a.length>0&&a.map(function(t,e){return s.a.createElement(b,{key:e,meta:t})})))}}]),e}(s.a.Component),q=function(t){function e(){return Object(u.a)(this,e),Object(p.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return s.a.createElement("div",{className:"entry-content clear"},s.a.createElement(N,{institution:this.props.parentState.userData.bridgeLibraryInstitution}))}}]),e}(s.a.Component),B=function(t){function e(){return Object(u.a)(this,e),Object(p.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"buildWidgets",value:function(t){return s.a.createElement(M,{key:t.id,course:t,parentState:this.parentState,handleClick:this.handleClick})}},{key:"render",value:function(){if(!this.props.error&&null!==this.props.parentState.userData.courses)var t=this.props.parentState.userData.courses.map(this.buildWidgets,{parentState:this.props.parentState,handleClick:this.props.handleClick}),e=s.a.createElement("li",{key:"courses-header",className:"menu-item"},s.a.createElement(f.b,{to:"/"},"Courses"),s.a.createElement("ul",{className:"sub-menu"},t));var a="menu-item";return"home"===this.props.view&&(a+=" current-menu-item"),s.a.createElement("div",{itemType:"https://schema.org/WPSideBar",itemScope:"itemscope",id:"secondary",className:"widget-area secondary",role:"complementary"},s.a.createElement("div",{className:"sidebar-main"},s.a.createElement("aside",{className:"widget widget_nav_menu"},s.a.createElement("div",{className:"menu-sidebar-container"},s.a.createElement("ul",{id:"menu-sidebar",className:"menu"},s.a.createElement("li",{className:a},s.a.createElement(f.b,{to:"/"},"Home")),e,this.props.error||"undefined"===typeof this.props.parentState.userData.circulationData||0===this.props.parentState.userData.circulationData.length?s.a.createElement("div",null):s.a.createElement(P,this.props))))))}}]),e}(s.a.Component),M=function(t){function e(){return Object(u.a)(this,e),Object(p.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this,e="menu-item";return"undefined"!==typeof this.props.parentState.currentObject&&this.props.course.id===this.props.parentState.currentObject.id&&(e+=" current-menu-item"),s.a.createElement("li",{className:e},s.a.createElement(f.b,{to:"/courses/"+this.props.course.slug,onClick:function(e){return t.props.handleClick(t.props.course.slug,"courses")}},function(t){var e=t.courseData.courseCode.split("|");return e[1]+" "+e[2]+": "+t.title}(this.props.course)))}}]),e}(s.a.Component),P=function(t){function e(){return Object(u.a)(this,e),Object(p.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this,e="menu-item";return"circulation"===this.props.parentState.view&&(e+=" current-menu-item"),s.a.createElement("li",{className:e},s.a.createElement(f.b,{to:"/circulation-data/",onClick:function(e){return t.props.handleClick("","circulation")}},"Loans and Requests"))}}]),e}(s.a.Component),A=B,Y=function(t){function e(){return Object(u.a)(this,e),Object(p.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return s.a.createElement("div",{className:"spinner-container"},s.a.createElement("div",{className:"spinner"},s.a.createElement("span",{className:"spinner-inner-1"}),s.a.createElement("span",{className:"spinner-inner-2"}),s.a.createElement("span",{className:"spinner-inner-3"})))}}]),e}(s.a.Component),$=a(39),W=a(25);function H(){var t=Object($.a)(["\n    query GET_USERS($email: String) {\n\t\tusers(where: {search: $email}, first: 1) {\n\t\t\tedges {\n\t\t\t\tnode {\n\t\t\t\t\tid\n\t\t\t\t\tuserId\n\t\t\t\t\tname\n\t\t\t\t\temail\n\t\t\t\t\tnicename\n\t\t\t\t\tuserData {\n\t\t\t\t\t\talternateId\n\t\t\t\t\t\tbridgeLibraryInstitution\n\t\t\t\t\t\tcourses {\n\t\t\t\t\t\t\t... on Course {\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\tslug\n\t\t\t\t\t\t\t\ttitle\n\t\t\t\t\t\t\t\tcourseData {\n\t\t\t\t\t\t\t\t\talmaId\n\t\t\t\t\t\t\t\t\tcourseCode\n\t\t\t\t\t\t\t\t\tcourseNumber\n\t\t\t\t\t\t\t\t\tstartDate\n\t\t\t\t\t\t\t\t\tendDate\n\t\t\t\t\t\t\t\t\tinstitution {\n\t\t\t\t\t\t\t\t\t\t... on Institution {\n\t\t\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tacademicDepartment {\n\t\t\t\t\t\t\t\t\t\t... on AcademicDepartment {\n\t\t\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tcourseTerm {\n\t\t\t\t\t\t\t\t\t\t... on CourseTerm {\n\t\t\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tcoreResources {\n\t\t\t\t\t\t\t\t\t\t... on Resource {\n\t\t\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\t\t\tslug\n\t\t\t\t\t\t\t\t\t\t\ttitle\n\t\t\t\t\t\t\t\t\t\t\tcontent\n\t\t\t\t\t\t\t\t\t\t\tresourceData {\n\t\t\t\t\t\t\t\t\t\t\t\talmaId\n\t\t\t\t\t\t\t\t\t\t\t\tprimoId\n\t\t\t\t\t\t\t\t\t\t\t\turl\n\t\t\t\t\t\t\t\t\t\t\t\timageUrl {\n\t\t\t\t\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\t\t\t\t\taltText\n\t\t\t\t\t\t\t\t\t\t\t\t\tsourceUrl\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tprimoImageUrl\n\t\t\t\t\t\t\t\t\t\t\t\tprimoImageInfo\n\t\t\t\t\t\t\t\t\t\t\t\tauthor\n\t\t\t\t\t\t\t\t\t\t\t\tisbn\n\t\t\t\t\t\t\t\t\t\t\t\tpublicationYear\n\t\t\t\t\t\t\t\t\t\t\t\tresourceFormat {\n\t\t\t\t\t\t\t\t\t\t\t\t\t... on ResourceFormat {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tresourceType {\n\t\t\t\t\t\t\t\t\t\t\t\t\t... on ResourceType {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tancestors {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\trelatedCoursesResources {\n\t\t\t\t\t\t\t\t\t\t... on Resource {\n\t\t\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\t\t\tslug\n\t\t\t\t\t\t\t\t\t\t\ttitle\n\t\t\t\t\t\t\t\t\t\t\tcontent\n\t\t\t\t\t\t\t\t\t\t\tresourceData {\n\t\t\t\t\t\t\t\t\t\t\t\talmaId\n\t\t\t\t\t\t\t\t\t\t\t\tprimoId\n\t\t\t\t\t\t\t\t\t\t\t\turl\n\t\t\t\t\t\t\t\t\t\t\t\timageUrl {\n\t\t\t\t\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\t\t\t\t\taltText\n\t\t\t\t\t\t\t\t\t\t\t\t\tsourceUrl\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tprimoImageUrl\n\t\t\t\t\t\t\t\t\t\t\t\tprimoImageInfo\n\t\t\t\t\t\t\t\t\t\t\t\tauthor\n\t\t\t\t\t\t\t\t\t\t\t\tisbn\n\t\t\t\t\t\t\t\t\t\t\t\tpublicationYear\n\t\t\t\t\t\t\t\t\t\t\t\tresourceFormat {\n\t\t\t\t\t\t\t\t\t\t\t\t\t... on ResourceFormat {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tresourceType {\n\t\t\t\t\t\t\t\t\t\t\t\t\t... on ResourceType {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tancestors {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcoursesCacheUpdated\n\t\t\t\t\t\tprimoFavorites {\n\t\t\t\t\t\t\t... on Resource {\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\tslug\n\t\t\t\t\t\t\t\ttitle\n\t\t\t\t\t\t\t\tcontent\n\t\t\t\t\t\t\t\tresourceData {\n\t\t\t\t\t\t\t\t\talmaId\n\t\t\t\t\t\t\t\t\tprimoId\n\t\t\t\t\t\t\t\t\turl\n\t\t\t\t\t\t\t\t\timageUrl {\n\t\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\t\taltText\n\t\t\t\t\t\t\t\t\t\tsourceUrl\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tprimoImageUrl\n\t\t\t\t\t\t\t\t\tprimoImageInfo\n\t\t\t\t\t\t\t\t\tauthor\n\t\t\t\t\t\t\t\t\tisbn\n\t\t\t\t\t\t\t\t\tpublicationYear\n\t\t\t\t\t\t\t\t\tresourceFormat {\n\t\t\t\t\t\t\t\t\t\t... on ResourceFormat {\n\t\t\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tprimoFavoritesCacheUpdated\n\t\t\t\t\t\tlibrarians {\n\t\t\t\t\t\t\t... on Librarian {\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\tslug\n\t\t\t\t\t\t\t\ttitle\n\t\t\t\t\t\t\t\tlibrarianData {\n\t\t\t\t\t\t\t\t\tacademicDepartment {\n\t\t\t\t\t\t\t\t\t\t... on AcademicDepartment {\n\t\t\t\t\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tlibrarianUserId {\n\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\tuserData {\n\t\t\t\t\t\t\t\t\t\tpictureUrl\n\t\t\t\t\t\t\t\t\t\tlibrarian {\n\t\t\t\t\t\t\t\t\t\t\temailAddress\n\t\t\t\t\t\t\t\t\t\t\tpicture {\n\t\t\t\t\t\t\t\t\t\t\t\tsourceUrl\n\t\t\t\t\t\t\t\t\t\t\t\ttitle\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tphoneNumber\n\t\t\t\t\t\t\t\t\t\t\tofficeLocation\n\t\t\t\t\t\t\t\t\t\t\twebsite\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlibrariansCacheUpdated\n\t\t\t\t\t\tcirculationData\n\t\t\t\t\t\tcirculationDataCacheUpdated\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n    }\n"]);return H=function(){return t},t}var Q=a.n(W)()(H()),G=function(t){function e(t){var a;Object(u.a)(this,e);var n=(a=Object(p.a)(this,Object(d.a)(e).call(this,t))).props.data.users.edges[0].node.userData.circulationData;return"string"===typeof n&&("undefined"!==typeof(n=JSON.parse(n)).loans&&null!==n.loans&&(n.loans=n.loans.map(function(t){return t.id=t.loan_id,t.slug="loans/"+t.loan_id,t})),a.props.data.users.edges[0].node.userData.circulationData=n),a.state={user:a.props.data.users.edges[0].node,userData:a.props.data.users.edges[0].node.userData,view:a.props.view,currentView:a.props.currentView,currentObject:a.getCurrentObject(a.props.view,a.props.data.users.edges[0].node.userData),data:a.props.data.users.edges[0].node.userData,loading:!1,error:null,fetchedData:{courses:a.props.data.users.edges[0].node.userData.courses?a.props.data.users.edges[0].node.userData.courses.slice(0):[],resources:[a.props.data.users.edges[0].node.userData.courses?a.allResources():[]],librarians:a.props.data.users.edges[0].node.userData.librarians?a.props.data.users.edges[0].node.userData.librarians.slice(0):[]}},a.handleClick=a.handleClick.bind(Object(m.a)(a)),a.getObjectId=a.getObjectId.bind(Object(m.a)(a)),a.getCurrentObject=a.getCurrentObject.bind(Object(m.a)(a)),a.getObjectTitle=a.getObjectTitle.bind(Object(m.a)(a)),a.fetchData=a.fetchData.bind(Object(m.a)(a)),a.getUrlSlug=a.getUrlSlug.bind(Object(m.a)(a)),a.handleHistory=a.handleHistory.bind(Object(m.a)(a)),a.allResources=a.allResources.bind(Object(m.a)(a)),window.onpopstate=a.handleHistory,a}return Object(h.a)(e,t),Object(l.a)(e,[{key:"allResources",value:function(){var t=[];return this.props.data.users.edges[0].node.userData.courses.forEach(function(e){null!==e.courseData.relatedCoursesResources&&e.courseData.relatedCoursesResources.forEach(function(e){return t.push(e)})}),t}},{key:"handleHistory",value:function(){var t=this.getUrlSlug();this.handleClick(t.slug,t.type)}},{key:"getObjectId",value:function(t,e){if("undefined"===t)return t;var a=window.location.href.split("/"),n=a.pop()||a.pop();return e.userData.courses.find(function(t){return t.slug===n}).id}},{key:"getUrlSlug",value:function(){var t=window.location.pathname.split("/");return{slug:t.pop()||t.pop(),type:t.pop()}}},{key:"fetchData",value:function(){var t,e=this,a=this.getUrlSlug();switch(a.type){case"courses":t="query GetCourses($slug: String) {\n                            courses(where: {name: $slug}, first: 1) {\n                              edges {\n                                node {\n                                  id\n                                  title\n                                  slug\n                                  courseData {\n                                    almaId,\n                                    courseCode,\n                                    courseNumber,\n                                    startDate,\n                                    endDate,\n                                    institution {\n                                      ... on Institution {\n                                        id,\n                                        name,\n                                      }\n                                    },\n                                    academicDepartment {\n                                      ... on AcademicDepartment {\n                                        id,\n                                        name,\n                                      }\n                                    },\n                                    courseTerm {\n                                      ... on CourseTerm {\n                                        id,\n                                        name,\n                                      }\n                                    },\n                                    coreResources {\n                                      ... on Resource {\n                                        id,\n                                        slug,\n                                        title,\n                                        content,\n                                        resourceData {\n                                          almaId,\n                                          primoId,\n                                          url,\n                                          imageUrl {\n                                            id,\n                                            altText,\n                                            sourceUrl,\n                                          },\n                                          primoImageUrl,\n                                          primoImageInfo,\n                                          author,\n                                          isbn,\n                                          publicationYear,\n                                          resourceFormat {\n                                            ... on ResourceFormat {\n                                              id,\n                                              name,\n                                            },\n                                          },\n                                          resourceType {\n                                            ... on ResourceType {\n                                              id,\n                                              name,\n                                              ancestors {\n                                                name,\n                                              },\n                                            },\n                                          },\n                                        },\n                                      },\n                                    },\n                                    relatedCoursesResources {\n                                      ... on Resource {\n                                        id,\n                                        slug,\n                                        title,\n                                        content,\n                                        resourceData {\n                                          almaId,\n                                          primoId,\n                                          url,\n                                          imageUrl {\n                                            id,\n                                            altText,\n                                            sourceUrl,\n                                          },\n                                          primoImageUrl,\n                                          primoImageInfo,\n                                          author,\n                                          isbn,\n                                          publicationYear,\n                                          resourceFormat {\n                                            ... on ResourceFormat {\n                                              id,\n                                              name,\n                                            },\n                                          },\n                                          resourceType {\n                                            ... on ResourceType {\n                                              id,\n                                              name,\n                                              ancestors {\n                                                name,\n                                              },\n                                            },\n                                          },\n                                        },\n                                      },\n                                    },\n                                  }\n                                }\n                              }\n                            }\n                          }";break;case"resources":t="query GetResources($slug: String) {\n    resources(where: {name: $slug}, first: 1) {\n      edges {\n        node {\n          id\n          slug\n          title\n          resourceData {\n            url\n            author\n            imageUrl {\n              sourceUrl\n            }\n            primoImageInfo\n            publicationYear\n            resourceFormat {\n              ... on Category {\n                id\n                name\n              }\n            }\n            relatedDepartments {\n              ... on Category {\n                id\n                name\n              }\n            }\n            relatedCoursesResources {\n              ... on Course {\n                id\n              }\n            }\n          }\n        }\n      }\n    }\n  }";break;case"librarians":t="query GetLibrarians($slug: String) {\n    librarians(where: {name: $slug}, first: 1){\n      edges {\n        node {\n          id\n          slug\n          title\n          librarianData {\n            academicDepartment {\n              ... on AcademicDepartment {\n                name\n              }\n            }\n            librarianUserId {\n              id\n              email\n              username\n              description\n              userData {\n                librarian {\n                  emailAddress\n                  phoneNumber\n                  officeLocation\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }";break;default:t=""}this.setState({loading:!0,error:null}),fetch("https://my.bridgelibraries.org/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t,variables:{slug:a.slug}})}).then(function(t){return t.json()}).then(function(n){if(n.errors)e.setState({loading:!1,error:n.errors[0],data:n.data});else{var r=e.state.fetchedData;switch(a.type){case"courses":var s={};s=0===n.data.courses.edges.length?{title:"Course Not Found"}:n.data.courses.edges[0].node,r.courses.push(s),e.setState({loading:!1,error:null,data:n.data,currentObject:s,fetchedData:r});break;case"resources":var i={};i=0===n.data.resources.edges.length?{title:"Resource Not Found"}:n.data.resources.edges[0].node,r.resources.push(i),e.setState({loading:!1,error:null,data:n.data,currentObject:i,fetchedData:r});break;case"librarians":var o={};o=0===n.data.librarians.edges.length?{title:"Librarian Not Found"}:n.data.librarians.edges[0].node,r.librarians.push(o),e.setState({loading:!1,error:null,data:n.data,currentObject:o,fetchedData:r});break;default:t=""}}})}},{key:"getCurrentObject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";0!==e.length||this.props.error||(e=this.state.userData);var n=window.location.href.split("/");if(0===a.length&&(a=n.pop()||n.pop()),"resources"===t)n[4];switch(t){case"courses":var r;return"undefined"!==typeof this.state&&(e=this.state.fetchedData),e.courses&&(r=e.courses.find(function(t){return t.slug===a})),"undefined"!==typeof r?r:{status:404,title:"Course Not Found"};case"resources":return"undefined"!==typeof this.state&&(e=this.state.fetchedData),e.courses&&(r=e.courses.find(function(t){return t.slug===a})),{status:404,title:"Resource Not Found"};case"primoFavorites":return e.primoFavorites.find(function(t){return t.slug===a});case"librarians":var s;return"undefined"!==typeof this.state&&(e=this.state.fetchedData),e.librarians&&(s=e.librarians.find(function(t){return t.slug===a})),"undefined"!==typeof s?s:{status:404,title:"Librarian Not Found"};case"circulation":return{title:""};case"loans":return e.circulationData.loans.find(function(t){return t.id===a});case"requests":return e.circulationData.requests.find(function(t){return t.id===a});case"fees":return e.circulationData.fees.find(function(t){return t.id===a});case"support":return{title:"Support"};case"error":return{title:"Error"};case"home":default:return{title:"Home"}}}},{key:"getObjectTitle",value:function(t){switch(this.state.view){case"courses":if(null!==t&&"undefined"!==typeof t.courseData){var e=t.courseData.courseCode.split("|");return e[1]+" "+e[2]+": "+t.title}return t.title;default:return t.title}}},{key:"handleClick",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"home";this.setState({view:e,currentObject:this.getCurrentObject(e,[],t)})}},{key:"componentDidMount",value:function(){"undefined"!==typeof this.state.currentObject&&null!==this.state.data&&404!==this.state.currentObject.status||this.fetchData()}},{key:"render",value:function(){return this.state.loading?s.a.createElement(Y,null):("home"===this.state.view?t=s.a.createElement(U,{parentState:this.state,handleClick:this.handleClick,error:this.props.error,errorMessage:this.props.errorMessage}):"courses"===this.state.view?t=s.a.createElement(I,{parentState:this.state,handleClick:this.handleClick}):"librarians"===this.state.view?t=s.a.createElement(R,{parentState:this.state,handleClick:this.handleClick}):"resources"===this.state.view||"primoFavorites"===this.state.view?t=s.a.createElement(T,{parentState:this.state,handleClick:this.handleClick}):"circulation"===this.state.view?t=s.a.createElement(_,{parentState:this.state,handleClick:this.handleClick}):"loans"===this.state.view?t=s.a.createElement(F,{parentState:this.state,handleClick:this.handleClick}):"requests"===this.state.view?t=s.a.createElement(x,{parentState:this.state,handleClick:this.handleClick}):"fees"===this.state.view?t=s.a.createElement(L,{parentState:this.state,handleClick:this.handleClick}):"support"===this.state.view&&(t=s.a.createElement(q,{parentState:this.state,handleClick:this.handleClick})),s.a.createElement("div",null,s.a.createElement(A,{view:this.state.view,parentState:this.state,handleClick:this.handleClick,error:this.props.error}),s.a.createElement("div",{id:"primary",className:"content-area primary"},s.a.createElement("main",{id:"main",className:"site-main",role:"main"},s.a.createElement("article",{itemType:"https://schema.org/CreativeWork",itemScope:"itemscope",className:"page type-page status-publish ast-article-single"},s.a.createElement("header",{className:"entry-header ast-no-thumbnail ast-no-meta"},s.a.createElement("h1",{className:"entry-title",itemProp:"headline"},this.getObjectTitle(this.state.currentObject))),t)))));var t}}]),e}(s.a.Component),J=a(21),V=a(32),z=function(t){function e(){return Object(u.a)(this,e),Object(p.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return s.a.createElement("div",{className:"lds-facebook"},s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null))}}]),e}(s.a.Component),K=!0,X=new o.a({uri:"https://my.bridgelibraries.org/graphql"});function Z(t){var e=t.currentData,a=t.updateKey,n=Object(V.a)(Q,{variables:{email:window.graphqlQuery.variables.email},pollInterval:1e4}),r=n.loading,i=n.data,o=n.refetch,c=n.startPolling,u=n.stopPolling;return r?s.a.createElement("p",null,"Loading ..."):(e.coursesCacheUpdated===i.users.edges[0].node.userData.coursesCacheUpdated&&e.librariansCacheUpdated===i.users.edges[0].node.userData.librariansCacheUpdated&&e.primoFavoritesCacheUpdated===i.users.edges[0].node.userData.primoFavoritesCacheUpdated&&e.circulationDataCacheUpdated===i.users.edges[0].node.userData.circulationDataCacheUpdated||(K=!1,u(),a(!1)),s.a.createElement("div",null,K?s.a.createElement(z,null):s.a.createElement("button",{onClick:function(){K=!0,c(1e4),a(!1),o()}},"Update")))}Object(i.render)(s.a.createElement(c.a,{client:X},s.a.createElement(function(){var t=Object(r.useState)(!1),e=Object(n.a)(t,2),a=e[0],i=e[1],o=Object(V.a)(Q,{variables:{email:window.graphqlQuery.variables.email}}),c=o.loading,u=o.error,l=o.data;if(c)return s.a.createElement(Y,null);var p="",d=!1;return u?s.a.createElement("div",{id:"primary",className:"content-area primary"},s.a.createElement("main",{id:"main",className:"site-main",role:"main"},s.a.createElement("article",{itemType:"https://schema.org/CreativeWork",itemScope:"itemscope",className:"page type-page status-publish ast-article-single"},s.a.createElement("header",{className:"entry-header ast-no-thumbnail ast-no-meta"},s.a.createElement("h1",{className:"entry-title",itemProp:"headline"},"Error")),s.a.createElement(S,{message:u.message})))):(u||0!==l.users.edges.length||(d=!0,p="User not found: "+window.graphqlQuery.variables.email),u||null!==l.users.edges[0].node.userData.courses&&0!==l.users.edges[0].node.userData.courses.length||(d=!0,p="You have no courses."),s.a.createElement(f.a,null,s.a.createElement(Z,{currentData:l.users.edges[0].node.userData,updateKey:i}),s.a.createElement(J.a,{exact:!0,path:"/",render:function(t){return s.a.createElement(G,Object.assign({key:a?1:Date.now()},t,{data:l,view:"home",error:d,errorMessage:p}))}}),s.a.createElement(J.a,{exact:!0,path:"/courses/:slug",render:function(t){return s.a.createElement(G,Object.assign({key:a?1:Date.now()},t,{view:"courses",data:l,error:d,errorMessage:p}))}}),s.a.createElement(J.a,{exact:!0,path:"/courses/:course/resources/:slug",render:function(t){return s.a.createElement(G,Object.assign({key:a?1:Date.now()},t,{view:"resources",data:l,error:d,errorMessage:p}))}}),s.a.createElement(J.a,{exact:!0,path:"/primo-favorites/:slug",render:function(t){return s.a.createElement(G,Object.assign({key:a?1:Date.now()},t,{view:d?"error":"primoFavorites",data:l,error:d,errorMessage:p}))}}),s.a.createElement(J.a,{exact:!0,path:"/librarians/:slug",render:function(t){return s.a.createElement(G,Object.assign({key:a?1:Date.now()},t,{view:"librarians",data:l,error:d,errorMessage:p}))}}),s.a.createElement(J.a,{exact:!0,path:"/circulation-data/",render:function(t){return s.a.createElement(G,Object.assign({key:a?1:Date.now()},t,{view:"circulation",data:l,error:d,errorMessage:p}))}}),s.a.createElement(J.a,{exact:!0,path:"/circulation-data/loans/:id",render:function(t){return s.a.createElement(G,Object.assign({key:a?1:Date.now()},t,{view:"loans",data:l,error:d,errorMessage:p}))}}),s.a.createElement(J.a,{exact:!0,path:"/circulation-data/requests/:id",render:function(t){return s.a.createElement(G,Object.assign({key:a?1:Date.now()},t,{view:"requests",data:l,error:d,errorMessage:p}))}}),s.a.createElement(J.a,{exact:!0,path:"/circulation-data/fees/:id",render:function(t){return s.a.createElement(G,Object.assign({key:a?1:Date.now()},t,{view:"fees",data:l,error:d,errorMessage:p}))}}),s.a.createElement(J.a,{exact:!0,path:"/support/",render:function(t){return s.a.createElement(G,Object.assign({key:a?1:Date.now()},t,{view:d?"error":"support",data:l,error:d,errorMessage:p}))}})))},null)),document.getElementById("root"))}});
//# sourceMappingURL=main.js.map